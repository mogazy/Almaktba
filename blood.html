<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุงููุณุชูุดู ุงูุชูุงุนูู ูุชุญููู ุงูุฏู</title>
    <!-- Chosen Palette: Calm Neutrals -->
    <!-- Application Structure Plan: A two-tab interactive dashboard. The first tab focuses on White Blood Cells (WBCs), featuring a donut chart for relative abundance and interactive buttons to display details for each of the 5 cell types. The second tab covers Red Blood Cell (RBC) indices, using interactive buttons to explain each index (MCV, MCH, etc.) and a dynamic visual aid to show cell size/color changes. This structure separates the two main report components for clarity, uses interaction to engage the user, and replaces a long scroll with focused, on-demand information, which is superior for learning and usability. -->
    <!-- Visualization & Content Choices: Report Info (WBC types) -> Goal (Compare roles) -> Viz (Chart.js Donut for abundance, HTML/JS for interactive detail cards) -> Interaction (Click button to update details) -> Justification (Visual context + focused learning). Report Info (RBC indices) -> Goal (Explain significance) -> Viz (HTML/CSS visual aid for size/color, HTML/JS for detail cards) -> Interaction (Click button to update explanation and visual) -> Justification (Makes abstract concepts tangible). This design avoids passive reading and promotes active exploration. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Cairo', sans-serif;
            background-color: #F8FAFC;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 350px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }
        .tab-btn {
            transition: all 0.3s ease;
        }
        .tab-btn.active {
            background-color: #0F766E;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        .content-card {
            transition: opacity 0.4s ease-in-out, transform 0.4s ease-in-out;
            opacity: 0;
            transform: translateY(10px);
            display: none;
        }
        .content-card.active {
            opacity: 1;
            transform: translateY(0);
            display: block;
        }
        .visual-aid-cell {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            border: 4px solid;
            transition: all 0.3s ease;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-700">

    <div class="container mx-auto p-4 md:p-8 max-w-5xl">
        <header class="text-center mb-8 md:mb-12">
            <h1 class="text-3xl md:text-4xl font-bold text-teal-800">ุงููุณุชูุดู ุงูุชูุงุนูู ูุชุญููู ุงูุฏู</h1>
            <p class="mt-2 text-lg text-slate-600">ุฃุฏุงุฉ ูุจุณุทุฉ ูููู ููููุงุช ุงูุฏู ูุฏูุงูุงุชูุง ุงูุตุญูุฉ</p>
        </header>

        <main>
            <!-- Main Navigation Tabs -->
            <div class="flex justify-center border-b-2 border-slate-200 mb-8">
                <button id="nav-wbc" class="main-nav-btn text-lg md:text-xl font-semibold py-3 px-6 border-b-4 border-teal-600 text-teal-700">ุฎูุงูุง ุงูุฏู ุงูุจูุถุงุก</button>
                <button id="nav-rbc" class="main-nav-btn text-lg md:text-xl font-semibold py-3 px-6 border-b-4 border-transparent text-slate-500">ูุคุดุฑุงุช ุงูุฏู ุงูุญูุฑุงุก</button>
            </div>

            <!-- WBC Section -->
            <section id="wbc-section">
                <div class="text-center mb-8">
                    <h2 class="text-2xl font-bold text-teal-700">ุฌูุด ุงูููุงุนุฉ: ุฎูุงูุง ุงูุฏู ุงูุจูุถุงุก (WBCs)</h2>
                    <p class="mt-2 max-w-3xl mx-auto text-slate-600">ุฎูุงูุง ุงูุฏู ุงูุจูุถุงุก ูู ุฎุท ุงูุฏูุงุน ุงูุฃูู ูู ุงูุฌุณู ุถุฏ ุงูุนุฏูู ูุงูุฃูุฑุงุถ. ูููุฑ ุชุญููู ุฃุนุฏุงุฏูุง ูุฃููุงุนูุง ุงููุฎุชููุฉ ูุงูุฐุฉ ูููุฉ ูููู ุงุณุชุฌุงุจุฉ ุฌูุงุฒู ุงูููุงุนูุ ููุณุงุนุฏ ูู ุงูุชูููุฒ ุจูู ุฃููุงุน ุงูุนุฏูู ุงููุฎุชููุฉ ูุงูุจูุชูุฑูุฉ ูุงูููุฑูุณูุฉ.</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 items-center">
                    <div class="md:col-span-1">
                        <h3 class="text-xl font-semibold text-center mb-4 text-slate-700">ุงูุชูุฒูุน ุงููุณุจู ููุฎูุงูุง</h3>
                        <div class="chart-container">
                            <canvas id="wbcChart"></canvas>
                        </div>
                    </div>
                    <div class="md:col-span-2">
                        <div class="bg-white p-6 rounded-xl shadow-md">
                            <div class="flex flex-wrap justify-center gap-2 mb-6">
                                <button data-target="neutrophils" class="wbc-tab-btn tab-btn active py-2 px-4 bg-slate-100 rounded-full font-semibold text-slate-600">ุงูุนุฏูุงุช</button>
                                <button data-target="lymphocytes" class="wbc-tab-btn tab-btn py-2 px-4 bg-slate-100 rounded-full font-semibold text-slate-600">ุงููููุงููุงุช</button>
                                <button data-target="monocytes" class="wbc-tab-btn tab-btn py-2 px-4 bg-slate-100 rounded-full font-semibold text-slate-600">ุงููุญูุฏุงุช</button>
                                <button data-target="eosinophils" class="wbc-tab-btn tab-btn py-2 px-4 bg-slate-100 rounded-full font-semibold text-slate-600">ุงูุญูุถุงุช</button>
                                <button data-target="basophils" class="wbc-tab-btn tab-btn py-2 px-4 bg-slate-100 rounded-full font-semibold text-slate-600">ุงููุงุนุฏูุฉ</button>
                            </div>
                            <div id="wbc-content-area">
                                <!-- Dynamic Content Here -->
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- RBC Section -->
            <section id="rbc-section" class="hidden">
                 <div class="text-center mb-8">
                    <h2 class="text-2xl font-bold text-teal-700">ูุงููุงุช ุงูุฃูุณุฌูู: ูุคุดุฑุงุช ุงูุฏู ุงูุญูุฑุงุก (RBCs)</h2>
                    <p class="mt-2 max-w-3xl mx-auto text-slate-600">ุชููุณ ูุฐู ุงููุคุดุฑุงุช ุญุฌู ุฎูุงูุง ุงูุฏู ุงูุญูุฑุงุก ููุญุชูุงูุง ูู ุงูููููุฌููุจููุ ููู ุญูููุฉ ูุชุดุฎูุต ูุชุตููู ุฃููุงุน ููุฑ ุงูุฏู ุงููุฎุชููุฉุ ูู ููุต ุงูุญุฏูุฏ ุฅูู ููุต ุงูููุชุงูููุงุชุ ููุง ููุฌู ูุญู ุงูุนูุงุฌ ุงูุตุญูุญ.</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <div class="flex flex-wrap justify-center gap-2 mb-6">
                        <button data-target="mcv" class="rbc-tab-btn tab-btn active py-2 px-4 bg-slate-100 rounded-full font-semibold text-slate-600">MCV</button>
                        <button data-target="mch" class="rbc-tab-btn tab-btn py-2 px-4 bg-slate-100 rounded-full font-semibold text-slate-600">MCH</button>
                        <button data-target="mchc" class="rbc-tab-btn tab-btn py-2 px-4 bg-slate-100 rounded-full font-semibold text-slate-600">MCHC</button>
                        <button data-target="pcv" class="rbc-tab-btn tab-btn py-2 px-4 bg-slate-100 rounded-full font-semibold text-slate-600">PCV</button>
                    </div>
                     <div id="rbc-content-area">
                        <!-- Dynamic Content Here -->
                    </div>
                </div>
            </section>

        </main>
    </div>

    <script>
        const wbcData = {
            neutrophils: {
                title: 'ุงูุนุฏูุงุช (Neutrophils)',
                icon: '๐ก๏ธ',
                description: 'ูู ุฎุท ุงูุฏูุงุน ุงูุฃูู ูุงูุฌููุฏ ุงูุฃูุซุฑ ุนุฏุฏูุง ูู ููุงุฌูุฉ ุงูุนุฏูู ุงูุจูุชูุฑูุฉ ูุงููุทุฑูุงุช. ุชูุงุฌู ูุชุจุชูุน ูุณุจุจุงุช ุงูุฃูุฑุงุถ ูุจุงุดุฑุฉ.',
                high: {
                    label: 'ุงูุงุฑุชูุงุน (Neutrophilia)',
                    meaning: 'ูุคุดุฑ ููู ุนูู ูุฌูุฏ ุนุฏูู ุจูุชูุฑูุฉ ุญุงุฏุฉ ุฃู ุงูุชูุงุจ ุดุฏูุฏ ูู ุงูุฌุณู.'
                },
                low: {
                    label: 'ุงูุงูุฎูุงุถ (Neutropenia)',
                    meaning: 'ูุฏ ูุดูุฑ ุฅูู ุนุฏูู ููุฑูุณูุฉ ูููุฉุ ุฃู ุจุนุถ ุฃูุฑุงุถ ุงูููุงุนุฉ ุงูุฐุงุชูุฉุ ุฃู ูุดุงูู ูู ูุฎุงุน ุงูุนุธู.'
                }
            },
            lymphocytes: {
                title: 'ุงูุฎูุงูุง ุงููููุงููุฉ (Lymphocytes)',
                icon: '๐ฏ',
                description: 'ูู ุงูููุงุช ุงูุฎุงุตุฉ ูู ุงูุฌูุงุฒ ุงูููุงุนูุ ูุชุฎุตุตุฉ ูู ูุญุงุฑุจุฉ ุงูููุฑูุณุงุช ูุงูุฎูุงูุง ุงูุณุฑุทุงููุฉ ูุชูููู ุฐุงูุฑุฉ ููุงุนูุฉ ุทูููุฉ ุงูุฃูุฏ.',
                high: {
                    label: 'ุงูุงุฑุชูุงุน (Lymphocytosis)',
                    meaning: 'ูุนุชุจุฑ ุงููุคุดุฑ ุงูุฑุฆูุณู ููุฌูุฏ ุนุฏูู ููุฑูุณูุฉ (ูุซู ุงูุฅูููููุฒุง ุฃู ููููุฏ-19).'
                },
                low: {
                    label: 'ุงูุงูุฎูุงุถ (Lymphopenia)',
                    meaning: 'ูุฏ ูุญุฏุซ ุฃุซูุงุก ุงูุนุฏูู ุงูุญุงุฏุฉ (ุจูุง ูู ุฐูู ุงูููุฑูุณูุฉ) ุฃู ุจุณุจุจ ุฃูุฑุงุถ ููุงุนูุฉ.'
                }
            },
            monocytes: {
                title: 'ุงูุฎูุงูุง ุงููุญูุฏุฉ (Monocytes)',
                icon: '๐งน',
                description: 'ุชุนูู ูู "ุนูุงู ุงููุธุงูุฉ" ูู ุงูุฌุณูุ ุญูุซ ุชุจุชูุน ุงูุฎูุงูุง ุงูููุชุฉ ูุงูุญุทุงู ููุณุจุจุงุช ุงูุฃูุฑุงุถ. ุชูุนุจ ุฏูุฑูุง ูุงููุง ูู ุงูุนุฏูู ุงููุฒููุฉ.',
                high: {
                    label: 'ุงูุงุฑุชูุงุน (Monocytosis)',
                    meaning: 'ูุฑุชุจุท ุบุงูุจูุง ุจุงูุนุฏูู ุงููุฒููุฉ (ูุซู ุงูุณู)ุ ุฃูุฑุงุถ ุงูููุงุนุฉ ุงูุฐุงุชูุฉุ ูุจุนุถ ุฃููุงุน ุงูุณุฑุทุงู.'
                },
                low: {
                    label: 'ุงูุงูุฎูุงุถ (Monocytopenia)',
                    meaning: 'ุฃูู ุดููุนูุงุ ููุฏ ูุฑุชุจุท ุจูุดุงูู ูู ูุฎุงุน ุงูุนุธู ุฃู ุฃููุงุน ูุนููุฉ ูู ุงูููููููุง.'
                }
            },
            eosinophils: {
                title: 'ุงูุญูุถุงุช (Eosinophils)',
                icon: '๐',
                description: 'ูุชุฎุตุตุฉ ูู ูุญุงุฑุจุฉ ุงูุนุฏูู ุงูุทููููุฉ (ูุซู ุงูุฏูุฏุงู) ูุชูุนุจ ุฏูุฑูุง ุฑุฆูุณููุง ูู ุงูุงุณุชุฌุงุจุงุช ุงูุชุญุณุณูุฉ ูุซู ุงูุฑุจู ูุงูุฃูุฒููุง.',
                high: {
                    label: 'ุงูุงุฑุชูุงุน (Eosinophilia)',
                    meaning: 'ูุคุดุฑ ููุงุณููู ุนูู ูุฌูุฏ ุญุณุงุณูุฉ ูุดุทุฉ ุฃู ุนุฏูู ุทููููุฉ.'
                },
                low: {
                    label: 'ุงูุงูุฎูุงุถ',
                    meaning: 'ุนุงุฏุฉ ูุง ูุนุชุจุฑ ุฐุง ุฃูููุฉ ุณุฑูุฑูุฉ ูุจูุฑุฉ.'
                }
            },
            basophils: {
                title: 'ุงูุฎูุงูุง ุงููุงุนุฏูุฉ (Basophils)',
                icon: '๐จ',
                description: 'ุงูุฃูู ุนุฏุฏูุง ูููููุง ูููุฉุ ุชุทูู ุงูููุณุชุงููู ูููุงุฏ ุฃุฎุฑู ุฃุซูุงุก ุงูุชูุงุนูุงุช ุงูุชุญุณุณูุฉ ูุงูุงูุชูุงุจุงุช ุงูุญุงุฏุฉ.',
                high: {
                    label: 'ุงูุงุฑุชูุงุน (Basophilia)',
                    meaning: 'ูุงุฏุฑุ ูููู ูุฏ ูุฑุชุจุท ุจุฑุฏูุฏ ูุนู ุชุญุณุณูุฉ ูุฒููุฉุ ุงูุชูุงุจุงุชุ ุฃู ุจุนุถ ุฃููุงุน ุงุจูุถุงุถ ุงูุฏู.'
                },
                low: {
                    label: 'ุงูุงูุฎูุงุถ',
                    meaning: 'ูู ุงูุตุนุจ ููุงุณู ููุง ูุญูู ุนุงุฏุฉู ุฏูุงูุฉ ูุฑุถูุฉ.'
                }
            }
        };

        const rbcData = {
            mcv: {
                title: 'ูุชูุณุท ุญุฌู ุงููุฑูุฉ (MCV)',
                description: 'ูููุณ ูุชูุณุท ุญุฌู ุฎูุงูุง ุงูุฏู ุงูุญูุฑุงุก. ูุณุงุนุฏ ูู ุชุญุฏูุฏ ูุง ุฅุฐุง ูุงูุช ุงูุฎูุงูุง ุตุบูุฑุฉุ ุทุจูุนูุฉุ ุฃู ูุจูุฑุฉ.',
                high: {
                    label: 'ุงุฑุชูุงุน (ุฎูุงูุง ูุจูุฑุฉ - Macrocytic)',
                    meaning: 'ููุต ููุชุงููู B12 ุฃู ุญูุถ ุงููููููุ ุฃูุฑุงุถ ุงููุจุฏุ ูุตูุฑ ุงูุบุฏุฉ ุงูุฏุฑููุฉ.',
                    visual: { size: '100px', color: '#EF4444', label: 'ูุจูุฑุฉ' }
                },
                low: {
                    label: 'ุงูุฎูุงุถ (ุฎูุงูุง ุตุบูุฑุฉ - Microcytic)',
                    meaning: 'ููุฑ ุงูุฏู ุงููุงุชุฌ ุนู ููุต ุงูุญุฏูุฏ (ุงูุณุจุจ ุงูุฃูุซุฑ ุดููุนูุง)ุ ุงูุซูุงุณูููุง.',
                    visual: { size: '60px', color: '#F87171', label: 'ุตุบูุฑุฉ' }
                },
                normalVisual: { size: '80px', color: '#F43F5E', label: 'ุทุจูุนูุฉ' }
            },
            mch: {
                title: 'ูุชูุณุท ููููุฌููุจูู ุงููุฑูุฉ (MCH)',
                description: 'ูููุณ ูุชูุณุท ูููุฉ ุงูููููุฌููุจูู (ุงูุจุฑูุชูู ุงูุญุงูู ููุฃูุณุฌูู) ูู ูู ุฎููุฉ ุฏู ุญูุฑุงุก.',
                high: {
                    label: 'ุงุฑุชูุงุน',
                    meaning: 'ุบุงูุจูุง ูุง ูุชุฑุงูู ูุน ุงุฑุชูุงุน MCV (ุงูุฎูุงูุง ุงููุจูุฑุฉ)ุ ุญูุซ ุชุญุชูู ุงูุฎููุฉ ุงูุฃูุจุฑ ุนูู ููููุฌููุจูู ุฃูุซุฑ.',
                    visual: { color: '#F43F5E', label: 'ุตุจุบุฉ ุนุงููุฉ' }
                },
                low: {
                    label: 'ุงูุฎูุงุถ (ุฎูุงูุง ุจุงูุชุฉ - Hypochromic)',
                    meaning: 'ูุคุดุฑ ุฑุฆูุณู ุนูู ููุฑ ุงูุฏู ุจููุต ุงูุญุฏูุฏุ ุญูุซ ูุง ููุฌุฏ ุญุฏูุฏ ูุงูู ูุตูุน ุงูููููุฌููุจูู.',
                    visual: { color: '#FCA5A5', label: 'ุจุงูุชุฉ' }
                },
                normalVisual: { color: '#EF4444', label: 'ุทุจูุนูุฉ' }
            },
            mchc: {
                title: 'ุชุฑููุฒ ููููุฌููุจูู ุงููุฑูุฉ (MCHC)',
                description: 'ูููุณ ุชุฑููุฒ ุงูููููุฌููุจูู ุฏุงุฎู ุงูุฎููุฉุ ุฃู ูุฏู "ูุซุงูุฉ" ุงูููููุฌููุจูู ุจุบุถ ุงููุธุฑ ุนู ุญุฌู ุงูุฎููุฉ.',
                 high: {
                    label: 'ุงุฑุชูุงุน',
                    meaning: 'ูุงุฏุฑุ ูุฏ ูุดูุฑ ุฅูู ุชูููู ุงููุฑูุงุช ุงููุฑูู ุงููุฑุงุซู ุฃู ุงูุฌูุงู ุงูุดุฏูุฏ.',
                    visual: { color: '#DC2626', label: 'ููุฑูุฒุฉ' }
                },
                low: {
                    label: 'ุงูุฎูุงุถ (Hypochromia)',
                    meaning: 'ูุคูุฏ ูุฌูุฏ ุฎูุงูุง ุจุงูุชุฉ ุงููููุ ููุฑุชุจุท ุจููุฉ ุจููุต ุงูุญุฏูุฏ ูุงูุซูุงุณูููุง.',
                    visual: { color: '#FCA5A5', label: 'ุจุงูุชุฉ' }
                },
                normalVisual: { color: '#EF4444', label: 'ุทุจูุนูุฉ' }
            },
            pcv: {
                title: 'ุญุฌู ุงููุฑูุงุช ุงููุถุบูุท (PCV/HCT)',
                description: 'ูููุณ ุงููุณุจุฉ ุงููุฆููุฉ ูุฎูุงูุง ุงูุฏู ุงูุญูุฑุงุก ูู ุฅุฌูุงูู ุญุฌู ุงูุฏู. ูุนุทู ููุฑุฉ ุนุงูุฉ ุนู ูุซุงูุฉ ุงูุฏู.',
                high: {
                    label: 'ุงุฑุชูุงุน (ูุซุฑุฉ ุงูุญูุฑ - Polycythemia)',
                    meaning: 'ุงูุฌูุงู (ุงูุณุจุจ ุงูุฃูุซุฑ ุดููุนูุง)ุ ุฃูุฑุงุถ ุงูุฑุฆุฉ ุฃู ุงูููุจ ุงููุฒููุฉุ ุงูุฅูุงูุฉ ูู ุงููุฑุชูุนุงุช.',
                    visual: { fill: '70%', label: 'ุฏู ูุซูู' }
                },
                low: {
                    label: 'ุงูุฎูุงุถ (ููุฑ ุงูุฏู - Anemia)',
                    meaning: 'ุฃู ููุน ูู ุฃููุงุน ููุฑ ุงูุฏูุ ููุฏุงู ุงูุฏูุ ููุต ุงูุชุบุฐูุฉุ ุฃูุฑุงุถ ุงูููู.',
                    visual: { fill: '30%', label: 'ุฏู ุฎููู' }
                },
                normalVisual: { fill: '45%', label: 'ุทุจูุนู' }
            }
        };

        document.addEventListener('DOMContentLoaded', function () {
            const wbcContentArea = document.getElementById('wbc-content-area');
            const rbcContentArea = document.getElementById('rbc-content-area');

            function updateWBCContent(cellType) {
                const data = wbcData[cellType];
                wbcContentArea.innerHTML = `
                    <div class="content-card active">
                        <div class="text-center mb-4">
                            <span class="text-4xl">${data.icon}</span>
                            <h3 class="text-2xl font-bold text-teal-700 mt-2">${data.title}</h3>
                        </div>
                        <p class="text-center text-slate-600 mb-6">${data.description}</p>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="bg-rose-50 p-4 rounded-lg border-l-4 border-rose-400">
                                <h4 class="font-bold text-rose-800">
                                    <span class="inline-block ml-2">โฒ</span>${data.high.label}
                                </h4>
                                <p class="text-slate-700 mt-1">${data.high.meaning}</p>
                            </div>
                            <div class="bg-sky-50 p-4 rounded-lg border-l-4 border-sky-400">
                                <h4 class="font-bold text-sky-800">
                                    <span class="inline-block ml-2">โผ</span>${data.low.label}
                                </h4>
                                <p class="text-slate-700 mt-1">${data.low.meaning}</p>
                            </div>
                        </div>
                    </div>
                `;
            }
            
            function getRBCVisualAid(index) {
                const data = rbcData[index];
                if (index === 'pcv') {
                    return `
                        <div class="flex justify-around items-end gap-4 text-center h-40">
                             <div>
                                <div class="w-16 h-32 bg-red-100 rounded-md flex flex-col-reverse"><div class="bg-red-500 rounded-b-md" style="height: ${data.low.visual.fill};"></div></div>
                                <p class="mt-2 font-semibold text-sm">${data.low.visual.label}</p>
                            </div>
                            <div>
                                <div class="w-16 h-32 bg-red-100 rounded-md flex flex-col-reverse"><div class="bg-red-500 rounded-b-md" style="height: ${data.normalVisual.fill};"></div></div>
                                <p class="mt-2 font-semibold text-sm">ุทุจูุนู</p>
                            </div>
                             <div>
                                <div class="w-16 h-32 bg-red-100 rounded-md flex flex-col-reverse"><div class="bg-red-500 rounded-b-md" style="height: ${data.high.visual.fill};"></div></div>
                                <p class="mt-2 font-semibold text-sm">${data.high.visual.label}</p>
                            </div>
                        </div>
                    `;
                } else if (index === 'mcv') {
                     return `
                        <div class="flex justify-around items-center gap-4 text-center">
                            <div class="visual-aid-cell" style="width:${data.low.visual.size}; height:${data.low.visual.size}; background-color:${data.low.visual.color}; border-color:${data.low.visual.color}44;">
                                ${data.low.visual.label}
                            </div>
                            <div class="visual-aid-cell" style="width:${data.normalVisual.size}; height:${data.normalVisual.size}; background-color:${data.normalVisual.color}; border-color:${data.normalVisual.color}44;">
                                ${data.normalVisual.label}
                            </div>
                            <div class="visual-aid-cell" style="width:${data.high.visual.size}; height:${data.high.visual.size}; background-color:${data.high.visual.color}; border-color:${data.high.visual.color}44;">
                                ${data.high.visual.label}
                            </div>
                        </div>
                    `;
                } else { // MCH and MCHC
                    return `
                        <div class="flex justify-around items-center gap-4 text-center">
                            <div class="visual-aid-cell" style="background-color:${data.low.visual.color}; border-color:${data.low.visual.color}44;">
                                ${data.low.visual.label}
                            </div>
                            <div class="visual-aid-cell" style="background-color:${data.normalVisual.color}; border-color:${data.normalVisual.color}44;">
                                ${data.normalVisual.label}
                            </div>
                            <div class="visual-aid-cell" style="background-color:${data.high.visual.color}; border-color:${data.high.visual.color}44;">
                                ${data.high.visual.label}
                            </div>
                        </div>
                    `;
                }
            }

            function updateRBCContent(index) {
                const data = rbcData[index];
                rbcContentArea.innerHTML = `
                     <div class="content-card active">
                        <div class="text-center mb-4">
                            <h3 class="text-2xl font-bold text-teal-700">${data.title}</h3>
                        </div>
                        <p class="text-center text-slate-600 mb-6">${data.description}</p>
                        <div class="mb-8 p-4 bg-slate-50 rounded-lg">
                           ${getRBCVisualAid(index)}
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="bg-rose-50 p-4 rounded-lg border-l-4 border-rose-400">
                                <h4 class="font-bold text-rose-800">
                                    <span class="inline-block ml-2">โฒ</span>${data.high.label}
                                </h4>
                                <p class="text-slate-700 mt-1">${data.high.meaning}</p>
                            </div>
                            <div class="bg-sky-50 p-4 rounded-lg border-l-4 border-sky-400">
                                <h4 class="font-bold text-sky-800">
                                    <span class="inline-block ml-2">โผ</span>${data.low.label}
                                </h4>
                                <p class="text-slate-700 mt-1">${data.low.meaning}</p>
                            </div>
                        </div>
                    </div>
                `;
            }

            const wbcTabButtons = document.querySelectorAll('.wbc-tab-btn');
            wbcTabButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    wbcTabButtons.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    updateWBCContent(btn.dataset.target);
                });
            });

            const rbcTabButtons = document.querySelectorAll('.rbc-tab-btn');
            rbcTabButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    rbcTabButtons.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    updateRBCContent(btn.dataset.target);
                });
            });

            const mainNavWBC = document.getElementById('nav-wbc');
            const mainNavRBC = document.getElementById('nav-rbc');
            const wbcSection = document.getElementById('wbc-section');
            const rbcSection = document.getElementById('rbc-section');

            mainNavWBC.addEventListener('click', () => {
                mainNavWBC.classList.add('border-teal-600', 'text-teal-700');
                mainNavWBC.classList.remove('border-transparent', 'text-slate-500');
                mainNavRBC.classList.add('border-transparent', 'text-slate-500');
                mainNavRBC.classList.remove('border-teal-600', 'text-teal-700');
                wbcSection.classList.remove('hidden');
                rbcSection.classList.add('hidden');
            });

            mainNavRBC.addEventListener('click', () => {
                mainNavRBC.classList.add('border-teal-600', 'text-teal-700');
                mainNavRBC.classList.remove('border-transparent', 'text-slate-500');
                mainNavWBC.classList.add('border-transparent', 'text-slate-500');
                mainNavWBC.classList.remove('border-teal-600', 'text-teal-700');
                rbcSection.classList.remove('hidden');
                wbcSection.classList.add('hidden');
            });
            
            updateWBCContent('neutrophils');
            updateRBCContent('mcv');

            const ctx = document.getElementById('wbcChart').getContext('2d');
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['ุงูุนุฏูุงุช', 'ุงููููุงููุงุช', 'ุงููุญูุฏุงุช', 'ุงูุญูุถุงุช', 'ุงููุงุนุฏูุฉ'],
                    datasets: [{
                        label: 'ุงูุชูุฒูุน ุงููุณุจู',
                        data: [62, 30, 5.3, 2.3, 0.4],
                        backgroundColor: [
                            '#14B8A6',
                            '#F43F5E',
                            '#F59E0B',
                            '#3B82F6',
                            '#6366F1'
                        ],
                        borderColor: '#F8FAFC',
                        borderWidth: 4,
                        hoverOffset: 8
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                             labels: {
                                color: '#475569',
                                font: {
                                    family: "'Cairo', sans-serif",
                                    size: 14
                                }
                            }
                        },
                        tooltip: {
                             bodyFont: {
                                family: "'Cairo', sans-serif"
                            },
                            titleFont: {
                                family: "'Cairo', sans-serif"
                            },
                            callbacks: {
                                label: function(context) {
                                    return `${context.label}: ${context.raw}%`;
                                }
                            }
                        }
                    },
                    cutout: '60%'
                }
            });
        });
    </script>
</body>
</html>
