// ربط حدث النقر على أيقونة الإشعارات (الجرس)
            notificationBell.addEventListener('click', fetchNotificationsFromFirestore);
            
            // تأثير النقر على بطاقات الميزات
            featureCards.forEach(card => {
                card.addEventListener('click', function() {
                    this.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        this.style.transform = '';
                    }, 150);
                    const cardTitle = this.querySelector('.card-title').textContent;
                    if (!this.classList.contains('concept-explainer')) { 
                         showMessageBox('الوصول إلى الميزة', تم الوصول إلى ميزة: ${cardTitle});
                    } else {
                        const conceptExplainerContent = `
                            <textarea id="conceptInput" class="w-full p-3 border border-gray-300 rounded-xl mb-4 text-sm bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-300" placeholder="اكتب المفهوم الذي تريد شرحه..."></textarea>
                            <button id="explainConceptBtn" class="bg-indigo-600 text-white px-6 py-2 rounded-full cursor-pointer font-bold transition-all duration-200 hover:bg-indigo-700 active:scale-95">شرح المفهوم ✨</button>
                            <div id="conceptResult" class="mt-4 p-3 bg-blue-50 rounded-lg text-sm text-gray-700 text-right min-h-[50px] overflow-auto"></div>
                        `;
                        openCustomModal('شرح المفاهيم', conceptExplainerContent);
                        document.getElementById('explainConceptBtn').addEventListener('click', explainConcept);
                    }
                });
            });

            // وظيفة الترجمة (محاكاة بدون API)
            translateBtn.addEventListener('click', async function() {
                const text = translationInput.value.trim();
                if (!text) {
                    showMessageBox('خطأ', 'الرجاء إدخال نص للترجمة.');
                    return;
                }

                this.textContent = 'جاري الترجمة...';
                setTimeout(() => {
                    this.textContent = 'ترجم الآن';
                    translatedTextDisplay.textContent = 'هذا نص مترجم (محاكاة). النص الأصلي كان: "' + text + '"';
                }, 1500);
            });

            // تأثير النقر على أيقونات الرأس الأخرى
            headerIcons.forEach(icon => {
                // نتجنب أيقونة الجرس لأن لها معالج خاص بها الآن
                if (icon.id !== 'notificationBell') {
                    icon.addEventListener('click', function() {
                        this.style.transform = 'scale(0.9)';
                        setTimeout(() => {
                            this.style.transform = '';
                        }, 100);
                        const isProfile = this.classList.contains('profile-pic');
                        const message = isProfile ? 'فتح الملف الشخصي' : 'فتح البحث'; // تم إزالة "الإشعارات" من هنا
                        showMessageBox('وظيفة الرأس', message);
                    });
                }
            });
        });
    </script>
</body>
</html>
